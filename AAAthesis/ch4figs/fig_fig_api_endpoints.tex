\begin{figure}[h]
    \centering
    \begin{tikzpicture}[
        scale=0.85,
        node distance=1.5cm,
        auto,
        endpoint/.style={rectangle, draw, thick, fill=cyan!20, minimum width=2.2cm,
                         minimum height=0.6cm, text centered, font=\tiny},
        method/.style={text centered, font=\tiny\bfseries},
        arrow/.style={->, thick}
    ]

    % 标题
    \node[text centered] at (4.5, 8.5) {\Large \textbf{FastAPI 端点架构}};

    % 健康检查组
    \node[method] at (1.5, 7.5) {健康检查};
    \node[endpoint, fill=green!30] (health1) at (1.5, 6.8) {GET /health};
    \node[endpoint, fill=green!30] (health2) at (1.5, 6) {GET /api/v1/health};

    % 推理端点组
    \node[method] at (4.5, 7.5) {推理任务};
    \node[endpoint, fill=blue!30] (inference_post) at (4.5, 6.8) {POST /inference/hallo2};
    \node[endpoint, fill=blue!30] (inference_config) at (4.5, 6) {POST /inference/config};

    % 任务管理组
    \node[method] at (7.5, 7.5) {任务管理};
    \node[endpoint, fill=orange!30] (tasks_list) at (7.5, 6.8) {GET /tasks};
    \node[endpoint, fill=orange!30] (task_status) at (7.5, 6) {GET /tasks/\{id\}};

    % 模型端点组
    \node[method] at (10.5, 7.5) {模型信息};
    \node[endpoint, fill=purple!30] (models_list) at (10.5, 6.8) {GET /models};
    \node[endpoint, fill=purple!30] (model_info) at (10.5, 6) {GET /models/\{name\}};

    % 结果下载
    \node[method] at (4.5, 4.5) {结果下载};
    \node[endpoint, fill=red!30] (download_video) at (4.5, 3.8) {GET /tasks/\{id\}/video};
    \node[endpoint, fill=red!30] (download_logs) at (4.5, 3) {GET /tasks/\{id\}/logs};

    % 删除操作
    \node[endpoint, fill=red!30] (delete_task) at (7.5, 3.8) {DELETE /tasks/\{id\}};

    % 数据流向箭头
    \draw[arrow] (inference_post) -- (4.5, 5.2);
    \node[text centered, font=\tiny] at (3.5, 5.2) {提交};

    \draw[arrow] (4.5, 5.2) -- (task_status);
    \node[text centered, font=\tiny] at (5.5, 5.5) {查询};

    \draw[arrow] (task_status) -- (download_video);
    \node[text centered, font=\tiny] at (6.5, 4.5) {下载};

    \end{tikzpicture}
    \caption{FastAPI 端点架构和数据流}
    \label{fig:api_endpoints}
\end{figure}
